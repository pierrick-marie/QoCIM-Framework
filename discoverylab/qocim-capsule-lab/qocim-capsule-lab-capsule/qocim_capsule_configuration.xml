<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<qocim_capsule_configuration>
  <!-- Selection of the type information displayed in the log messages -->
  <log_level>HARDWARE</log_level>
  <!-- Set the advertisement routing filter of the capsule -->
  <advertisement_filter>function evaluate(doc) { load("nashorn:mozilla_compat.js"); importPackage(javax.xml.xpath);	var xpath = XPathFactory.newInstance().newXPath();if( (xpath.evaluate("//qocindicator[@id='10' and qoccriterion[@id='[10.1][10.2]']/qocmetricdefinition[@id='10.1']]", doc, XPathConstants.NODESET).length == 0)) {return false}if( (xpath.evaluate("//qocindicator[@id='15' and qoccriterion[@id='[15.1-15.2]']/qocmetricdefinition[@id='15.1']]", doc, XPathConstants.NODESET).length == 0)) {return false}return true;}</advertisement_filter>
  <!-- Set the subscription routing filter of the capsule -->
  <subscription_filter>function evaluate(doc) {	load("nashorn:mozilla_compat.js"); importPackage(javax.xml.xpath);	var xpath = XPathFactory.newInstance().newXPath();if( (xpath.evaluate("//qocindicator[@id='10' and qoccriterion[@id='[10.1][10.2]']/qocmetricdefinition[@id='10.1']]", doc, XPathConstants.NODESET).length == 0) &amp;&amp; (xpath.evaluate("//qocindicator[@id='10' and qoccriterion[@id='[10.1][10.2]']/qocmetricdefinition[@id='10.2']]", doc, XPathConstants.NODESET).length == 0)) {return false}return true;}</subscription_filter>
  <!-- Configure the functions executed by the capsule -->
  <functions>
    <!-- First function: computes the mean of 10 context information and QoC meta-data -->
    <function id="0">
      <type>ICDFMFunction</type>
      <parameters>
	<time_to_wait>0</time_to_wait>
	<timer_only>false</timer_only>
	<!-- The number of information used to compute the mean of the information -->
	<nb_handled_context_report>10</nb_handled_context_report>
      </parameters>
      <!-- Operator executed by the function: the mean -->
      <operator name="Mean"/>
    </function>
    <!-- Second function executed by the capsule: compute and add the value of the indicator number 15 in the QoC meta-data -->
    <!-- The indicator number 15 is the freshness -->
    <function id="1">
      <type>IQoCManagementFunction</type>
      <name>AddQoCIndicator</name>
      <parameters>
	<!-- Ids of the freshness -->
	<qoc_indicator_id>15</qoc_indicator_id>
	<qoc_definition_id>15.2</qoc_definition_id>
	<qoc_criterion_id>[15.1-15.2]</qoc_criterion_id>
      </parameters>
    </function>
  </functions>
</qocim_capsule_configuration>
